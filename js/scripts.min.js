/**
author: Bartlomiej Fryzowicz
e-mail: bfryzowicz@gmail.com
**/
!function(){/*canvas rectangle object*/
function a(a,b,c,d,e,f){this.x=b,this.y=c,B++,this.name=B,this.x0=b,this.y0=c,this.width=d,this.height=e,this.color=f,this.boom=a,this.active=a,this.calculateCorners(0,0),this.draw(),this.active||v.push(this)}/*helpers */
function b(a,c){for(var d=0;d<a.cornersX.length;d++){var e=a.cornersX[d]<=g(c.cornersX)&&a.cornersX[d]>=h(c.cornersX),f=a.cornersY[d]<=g(c.cornersY)&&a.cornersY[d]>=h(c.cornersY),i=c.cornersX[d]<=g(a.cornersX)&&c.cornersX[d]>=h(a.cornersX),j=c.cornersY[d]<=g(a.cornersY)&&c.cornersY[d]>=h(a.cornersY);if(i&&j||e&&f){c.calculateCorners(t,u),c.moved=!0;for(var k=0;k<v.length;k++){var l=v[k];l.clicked||l.moved||b(c,l)}return!0}}}function c(a){r=a.pageX-m,s=a.pageY-l,r/=z,s/=z}function d(){t=r-p,u=s-q}function e(a){n.clearRect(0,0,y,A),c(a),f()}function f(){for(var a=0;a<v.length;a++)v[a].moved=!1,v[a].draw()}function g(a){for(var b=0,c=0;c<a.length;c++)a[c]>b&&(b=a[c]);return b}function h(a){for(var b=a[0],c=0;c<a.length;c++)a[c]<b&&(b=a[c]);return b}var i=document.getElementById("myCanvas");if(!i)return!1;var j,k=$("#myCanvas").offset(),l=parseInt(k.top,10),m=parseInt(k.left,10),n=i.getContext("2d"),o=!1,p=0,q=0,r=0,s=0,t=0,u=0,v=[],w=i.width,x=i.height,y=$("#canvas-holder").width(),z=y/w,A=z*x;i.width=y,i.height=A,n.scale(z,z);var B=0;a.prototype.calculateCorners=function(a,b){this.x0=this.x,this.y0=this.y,this.x+=a,this.y+=b,this.cornersX=[this.x-this.width/2,this.x+this.width/2,this.x+this.width/2,this.x-this.width/2],this.cornersY=[this.y-this.height/2,this.y-this.height/2,this.y+this.height/2,this.y+this.height/2]},a.prototype.draw=function(){return n.beginPath(),n.fillStyle=this.color,n.rect(this.cornersX[0],this.cornersY[0],this.width,this.height),this.clicked=n.isPointInPath(r*z,s*z),n.fill(),n.strokeText(this.name,this.cornersX[0]+this.width/2-2,this.cornersY[0]+this.height/2+5),this.clicked&&(j=this,p=r,q=s,o=!0),n.closePath(),this};new a(!1,100,100,70,70,"rgb(0, 255, 0)"),new a(!1,400,300,100,90,"rgb(255, 80, 80)"),new a(!1,220,300,120,200,"rgb(180, 12, 255)"),new a(!1,500,100,70,30,"rgb(45, 100, 156)"),new a(!1,350,200,30,30,"rgb(244, 34, 120)");/*Mouse events*/
i.onmousedown=e,i.onmouseup=function(){o=!1},i.onmouseout=function(){o=!1},i.onmousemove=function(a){if(o===!1)return!1;c(a),d(),j.calculateCorners(t,u),n.clearRect(0,0,y,A);/*objects.forEach(function(obA, i) {
			for(var j = i + 1; j < objects.length; j++) {
				var obB = objects[j];
				var res = checkCollision(obA, obB);
			}
		});*/
for(var e=0;e<v.length;e++){var g=v[e];g!==j&&b(j,g)}p=r,q=s,f()},i.addEventListener("touchmove",function(a){return a.preventDefault(),a=a.targetTouches[0],i.onmousemove(a),!1})}(),function(){function a(a){a=a||window.event,a.dataTransfer.setData("text",this.innerHTML),this.className="dragStart"}function b(){this.className=""}var c=document.getElementById("drop");if(!c)return!1;for(var d=document.getElementById("dragAndDrop"),e=d.getElementsByTagName("a"),f=0;f<e.length;f++)e[f].ondragstart=a,e[f].ondragend=b;c.ondragenter=function(a){//event.dataTransfer.dropEffect = "copy";
return a=a||window.event,a.preventDefault(),!1},c.ondragover=function(a){//event.preventDefault();
return a=a||window.event,!1};var g=!1;c.ondrop=function(a){g||(c.innerHTML=""),g=!0,a=a||window.event;//event.preventDefault();
var b,d=a.dataTransfer.files;if(d)for(var e=0,f=d.length;f>e;e++){var h=d[e],i=new FileReader;-1!==h.type.search("image")?h.size<3145728?(i.onload=function(){b=this.result,document.getElementById("drop").innerHTML+='<img src="'+b+'" />'},i.readAsDataURL(h)):document.getElementById("drop").innerHTML+="File is too big. Try to upload smaller image.<br/>":-1!==h.type.search("text")&&(i.onload=function(){b=this.result,document.getElementById("drop").innerHTML+=b+"<br/>"},i.readAsText(h)),c.innerHTML+="<p>File name: "+h.name+" <br/>File size: "+h.size+" bytes  </p>"}return c.innerHTML+=a.dataTransfer.getData("text"),!1}}();