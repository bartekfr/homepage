/*
@author: Bartlomiej Fryzowicz
All rights reserved.
e-mail: bfryzowicz@gmail.com
*/
!function(a){a.fn.chart=function(b,c){function d(a){var b=1,c=m+.5,d=n+.5;a.strokeStyle="#000",a.lineWidth=b,// y axis
a.beginPath(),a.moveTo(c,5+j),a.lineTo(c,d+1),//add 2
a.stroke(),a.closePath(),//x axis
a.beginPath(),a.moveTo(c-5,d),a.lineTo(k-5,d),a.stroke(),//arrows
// y arrow
a.lineWidth=1,a.beginPath(),a.moveTo(c,0+j),a.lineTo(c+4,15+j),a.lineTo(c-4,15+j),a.closePath(),a.fill(),a.closePath(),//x arrow
a.beginPath(),a.moveTo(k,d),a.lineTo(k-15,d-4),a.lineTo(k-15,d+4),a.closePath(),a.fill(),a.closePath();//y values
for(var e=r.unit,g=o/e+1,h=j+15,i=e*p,l=0;g>l;l++){var q=d-l*i;if(h>=q)break;0!==l&&a.fillRect(c-5,q,5,1),a.font=r.axisFont,a.fillText(e*l,5,q-4)}for(var u=0;s>u;u++)a.font=r.axisFont,a.fillText(f[u],c+u*t,d+10)}var e=[],f=[],g=0;a.each(b,function(a,b){e[g]=b,f[g]=a,g++});// convert key-value object to two separate arrays width keys and values :
var h=this.width(),i=this.height(),j=40,k=h-j,l=i-2*j,m=0+j,n=i-j,o=0;a(e).each(function(a){e[a]>o&&(o=e[a])});// max value
var p=(l-20)/o,q=a.map(e,function(a,b){return e[b]*p}),r=a.extend({color:"#f00",title:"Example chart",spacing:30,unit:Math.pow(10,o.toString().length-1),axisFont:"10px Arial",chartWidth:1},c),s=e.length,t=(h-2*j)/s,u=t-r.spacing;return this.each(function(){var c=a(this).attr({width:h,height:i}),e=c[0].getContext("2d"),f=m,g=n-q[0];e.lineWidth=r.chartWidth;for(var j=0;s>j;j++){var k,l,o=q[j];e.fillStyle=r.color,"[object Array]"===Object.prototype.toString.call(b)?(k=j*t+m,l=n-o,e.beginPath(),e.moveTo(f,g),e.lineTo(k,l),e.stroke(),e.closePath(),e.beginPath(),e.arc(k,l,2,Math.PI/180*0,Math.PI/180*360),e.fill(),e.closePath(),g=l,f=k):e.fillRect(t*j+m,n-o,u,o)}e.fillStyle="#000",e.textBaseline="top",e.font="14pt Arial",e.fillText(r.title,m,10),d(e)})}}(jQuery);var createExcel;if(function(a){createExcel=function(b){var c=this;this.table=a(b),this.ctrlPressed=!1,this.selectedInputs=a("input.active",c.table),this.isThereSecondColumn=!1,this.clearButton=a(".clear"),this.addRowButton=a(".addRow"),this.error="",this.errorBtn=a(".error");var d=a(document);d.off(".excel"),c.addRowButton.on("click",function(){for(var b=a("tr:last-child",c.table),d=a("tr",c.table).size(),e=b.find("td").length+1,f=65+d-1,g=String.fromCharCode(f),h=a("<tr><th>"+g+"</th></tr>").insertAfter(b),i=1;e>i;i++){var j=g.toLowerCase()+i;j=unescape(j);var k='<input type="text" value="" id="'+j+'" />';h.append("<td>"+k+"</td>")}}),c.clearButton.on("click",function(){c.selectedInputs.removeClass("active"),c.firstColumn="",c.firstColumnInput="",c.firstColumnValues="",c.secondColumnInput="",c.secondColumnValues="",c.isThereSecondColumn=!1,c.errorBtn.html(""),c.error=""}),d.on("keydown.excel",function(a){17===a.which&&(c.ctrlPressed=!0)}),d.on("keyup.excel",function(b){17===b.which&&(c.selectedInputs=a("input.active",c.table),c.ctrlPressed=!1,c.findColumns(c.selectedInputs),c.separateColumns(c.selectedInputs),c.getValues(),c.validate(),c.createFinalDataObject(),c.showErrors())}),c.table.on("mouseover","input",function(){var b=a(this);c.ctrlPressed&&c.markAsReaded(b)})},createExcel.prototype.markAsReaded=function(a){a.addClass("active")},createExcel.prototype.checkWhichColumn=function(a){var b=a.attr("id"),c=b.slice(1,2);return c},createExcel.prototype.findColumns=function(b){var c=this;this.firstColumn=this.checkWhichColumn(b.eq(0)),b.each(function(){var b=c.checkWhichColumn(a(this));b!==c.firstColumn&&(c.secondColumn=b,c.isThereSecondColumn=!0)})},createExcel.prototype.separateColumns=function(b){var c=this;c.firstColumnInputs=b.filter(function(){return a(this).attr("id").search(c.firstColumn)+1}),c.isThereSecondColumn&&(c.secondColumnInputs=b.filter(function(){return a(this).attr("id").search(c.secondColumn)+1}))},createExcel.prototype.getValues=function(){this.firstColumnValues=this.firstColumnInputs.map(function(){return a(this).val()}),this.isThereSecondColumn&&(this.secondColumnValues=this.secondColumnInputs.map(function(){return a(this).val()}))},createExcel.prototype.validate=function(){this.isThereSecondColumn&&this.firstColumnValues.length!==this.secondColumnValues.length?this.error+="thre is not enough data<br/>":this.error=""},createExcel.prototype.showErrors=function(){this.errorBtn.html(this.error)},createExcel.prototype.createFinalDataObject=function(){var a=this,b=0;if(a.isThereSecondColumn)for(a.dataFinal={},b=0;b<a.firstColumnValues.length;b++)a.dataFinal[a.firstColumnValues[b]]=parseFloat(a.secondColumnValues[b]);else for(a.dataFinal=[],b=0;b<a.firstColumnValues.length;b++)a.dataFinal[b]=parseFloat(a.firstColumnValues[b]),isNaN(a.dataFinal[b])&&(a.error="Values are not numeric",a.selectedInputs.removeClass("active"))}}(jQuery),$(".excelTable").length){var grid=new createExcel(".excelTable");$(".draw").on("click",function(){$("#chart").chart(grid.dataFinal,{color:"#595959"})})}/*
author: Bartlomiej Fryzowicz
All rights reserved.
e-mail: bfryzowicz@gmail.com
*/
var clock;!function(){clock=function(){function a(){//var angle = Math.PI*2*(t * 6)/360;
var a=6*x;b(p),c(),e(),f(a),g(a/60),h(a/3600)}// drawClockFace() ---------------------------
function b(a){k.beginPath(),k.arc(n,o,n,0,2*Math.PI,!0);// Outer circle
var b=k.createRadialGradient(n,o,n-a,n,o,n-4);b.addColorStop(.1,"#000"),b.addColorStop(.7,"#eee"),k.fillStyle=b,k.fill(),k.beginPath(),k.arc(n,o,n-a,0,2*Math.PI,!0);// Outer circle
var c=k.createLinearGradient(0,0,150,150);c.addColorStop(.5,"white"),c.addColorStop(1,"#ddd"),k.fillStyle=c,k.fill(),k.beginPath(),k.arc(n,o,5,0,2*Math.PI,!0),// Outer circle
k.fillStyle="#000",k.fill()}//drawDigit------------------------
function c(){var a=n-35;k.fillStyle="#000000",k.font="bold 16px Arial, sans-serif",k.textAlign="center",k.textBaseline="middle";for(var b=1;13>b;b++){var c=2*Math.PI*(30*b-90)/360,e=n+Math.cos(c)*a,f=o+Math.sin(c)*a;d(b,e,f)}}function d(a,b,c){k.fillText(a,b,c)}function e(){k.fillStyle="#000000";for(var a,b,c=0;60>c;c++){var d=2*Math.PI*(6*c-90)/360;k.save(),k.translate(n,o),k.rotate(d),c%5?(a=10,b=1):(a=5,b=2),k.fillRect(n-p-a,0,a,b),k.restore()}}function f(a){k.save(),k.translate(n,o),k.rotate(i(a+u)),k.fillStyle="#000",k.fillRect(0,0,n-p-30,2),k.restore()}function g(a){k.save(),k.translate(n,o),k.rotate(i(a+v)),k.fillStyle="#000",k.fillRect(0,-1,n-p-45,2),k.restore()}function h(a){k.save(),k.translate(n,o),k.rotate(i(a+w)),k.fillStyle="#000",k.fillRect(0,-2,n-p-60,4),k.restore()}function i(a){return 2*Math.PI*a/360}var j=document.getElementById("clock");if(!j)return!1;var k=j.getContext("2d"),l=j.width,m=j.height,n=l/2,o=m/2,p=20,q=new Date,r=q.getSeconds(),s=q.getMinutes()+r/60,t=q.getHours()+s/60,u=6*r-90,v=6*s-90,w=30*t-90,x=0;a(),setInterval(function(){a(),x++},1e3)}}(jQuery),clock(),/**
author: Bartlomiej Fryzowicz
e-mail: bfryzowicz@gmail.com
**/
function(){/*canvas rectangle object*/
function a(a,b,c,d,e,f){this.x=b,this.y=c,C++,this.name=C,this.x0=b,this.y0=c,this.width=d,this.height=e,this.color=f,this.boom=a,this.active=a,this.calculateCorners(0,0),this.draw(),this.active||w.push(this)}/*helpers */
function b(a,c){for(var d=0;d<a.cornersX.length;d++){var e=a.cornersX[d]<=h(c.cornersX)&&a.cornersX[d]>=i(c.cornersX),f=a.cornersY[d]<=h(c.cornersY)&&a.cornersY[d]>=i(c.cornersY),g=c.cornersX[d]<=h(a.cornersX)&&c.cornersX[d]>=i(a.cornersX),j=c.cornersY[d]<=h(a.cornersY)&&c.cornersY[d]>=i(a.cornersY);if(g&&j||e&&f){c.calculateCorners(u,v),c.moved=!0;for(var k=0;k<w.length;k++){var l=w[k];l.clicked||l.moved||b(c,l)}return!0}}}function c(a){//hammer return clientX/Y as pageX/Y!
s=a.pageX-n+$(window).scrollLeft(),t=a.pageY-m+$(window).scrollTop(),s/=A,t/=A}function d(){u=s-q,v=t-r}function e(a){if(p===!1)return!1;c(a),d(),k.calculateCorners(u,v),o.save(),// Use the identity matrix while clearing the canvas
o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,z,B),o.restore();/*objects.forEach(function(obA, i) {
			for(var j = i + 1; j < objects.length; j++) {
				var obB = objects[j];
				var res = checkCollision(obA, obB);
			}
		});*/
for(var e=0;e<w.length;e++){var f=w[e];f!==k&&b(k,f)}q=s,r=t,g()}function f(a){o.clearRect(0,0,z,B),c(a),g()}function g(){for(var a=0;a<w.length;a++)w[a].moved=!1,w[a].draw()}function h(a){for(var b=0,c=0;c<a.length;c++)a[c]>b&&(b=a[c]);return b}function i(a){for(var b=a[0],c=0;c<a.length;c++)a[c]<b&&(b=a[c]);return b}var j=document.getElementById("myCanvas");if(!j)return!1;var k,l=$("#myCanvas").offset(),m=parseInt(l.top,10),n=parseInt(l.left,10),o=j.getContext("2d"),p=!1,q=0,r=0,s=0,t=0,u=0,v=0,w=[],x=j.width,y=j.height,z=$("#canvas-holder").width(),A=z/x,B=A*y;j.width=z,j.height=B,o.scale(A,A);var C=0;a.prototype.calculateCorners=function(a,b){this.x0=this.x,this.y0=this.y,this.x+=a,this.y+=b,this.cornersX=[this.x-this.width/2,this.x+this.width/2,this.x+this.width/2,this.x-this.width/2],this.cornersY=[this.y-this.height/2,this.y-this.height/2,this.y+this.height/2,this.y+this.height/2]},a.prototype.draw=function(){return o.beginPath(),o.fillStyle=this.color,o.rect(this.cornersX[0],this.cornersY[0],this.width,this.height),this.clicked=o.isPointInPath(s*A,t*A),o.fill(),o.strokeText(this.name,this.cornersX[0]+this.width/2-2,this.cornersY[0]+this.height/2+5),this.clicked&&(k=this,q=s,r=t,p=!0),o.closePath(),this};var D=(new a(!1,100,100,70,70,"rgb(0, 255, 0)"),new a(!1,400,300,100,90,"rgb(255, 80, 80)"),new a(!1,220,300,120,200,"rgb(180, 12, 255)"),new a(!1,500,100,70,30,"rgb(45, 100, 156)"),new a(!1,350,200,30,30,"rgb(244, 34, 120)"),Hammer(j,{prevent_default:!0}));D.on("touch",function(a){a=a.gesture.center,f(a)}),D.on("release",function(a){a=a.gesture.center,p=!1}),D.on("drag",function(a){return a=a.gesture.center,e(a),!1})}(),function(){function a(a){a=a||window.event,a.dataTransfer.setData("text",this.innerHTML),this.className="dragStart"}function b(){this.className=""}var c=document.getElementById("drop");if(!c)return!1;for(var d=document.getElementById("dragAndDrop"),e=d.getElementsByTagName("a"),f=0;f<e.length;f++)e[f].ondragstart=a,e[f].ondragend=b;c.ondragenter=function(a){//event.dataTransfer.dropEffect = "copy";
return a=a||window.event,a.preventDefault(),!1},c.ondragover=function(a){//event.preventDefault();
return a=a||window.event,!1};var g=!1;c.ondrop=function(a){g||(c.innerHTML=""),g=!0,a=a||window.event;//event.preventDefault();
var b=a.dataTransfer.files;if(b)for(var d=0,e=b.length;e>d;d++){var f=b[d];!function(a){var b=new FileReader;-1!==a.type.search("image")?a.size<3145728?(b.onload=function(){var b=this.result,d=a.name;console.log(d),c.innerHTML+="<p>File name: "+a.name+" <br/>File size: "+a.size+" bytes  </p>",document.getElementById("drop").innerHTML+='<img src="'+b+'" />'},b.readAsDataURL(a)):document.getElementById("drop").innerHTML+="File is too big. Try to upload smaller image.<br/>":-1!==a.type.search("text")&&(b.onload=function(){result=this.result,c.innerHTML+="<p>File name: "+a.name+" <br/>File size: "+a.size+" bytes  </p>",document.getElementById("drop").innerHTML+=result+"<br/>"},b.readAsText(a))}(f)}return c.innerHTML+=a.dataTransfer.getData("text"),!1}}(),function(a){var b=a(window),c=a("body");a("#show-menu").on("click",function(){return c.toggleClass("menu-panel-visible"),!1}),a("#main").on("click",function(){c.removeClass("menu-panel-visible")}),b.resize(function(){c.removeClass("menu-panel-visible")})}(jQuery);/**
 * @author Bartek Fryzowicz
 * TODO: refactoring, maybe switch to CSS3 Animations?, move paginator to separate file

*/
var paginator;/*
 Pagination component
*/
!function(a){var b={arrows:!0,numeric:!0,navClass:"menu",itemClass:"nav-item",prevText:"&laquo;",nextText:"&raquo;",icons:!1,numericClass:"item-number"};paginator=function(c){function d(){l.icons&&e();for(var b=0,c=o;c>b;b++){var d=b+1;l.icons&&(d='<img src="'+k[b]+'" />');var f=a("<li/>",{"class":l.numericClass+" "+l.itemClass}).append('<a href="#">'+d+"</a>");u.append(f)}t=a(s,u)}function e(){k=[],p.find(l.itemSelector).each(function(){var b=a(this).data("thumb");k.push(b)})}function f(){i=a('<a href="#" />').html(r),g=a("<li/>",{"class":l.itemClass+" prev"}).append(i),j=a('<a href="#" />').html(q),h=a("<li/>",{"class":l.itemClass+" next"}).append(j),u.prepend(g),u.append(h)}var g,h,i,j,k,l=a.extend({},b,c),m=l.arrows,n=l.numeric,o=l.itemsNumber,p=l.parent,q=l.nextText,r=l.prevText,s="."+l.numericClass,t=[],u=a("<ul>",{"class":l.navClass+" js-generated"});return n&&d(),m&&f(),p.append(u),{container:u,prevButton:i,nextButton:j,items:t}}}(jQuery);var galleryRotator;!function(a){galleryRotator=function(b,c,d){function e(a){"function"==typeof a&&a()}function f(){w=z.find(".originalImage"),x=w.height(),D=w.width(),z.height(x),y=Math.floor(D/R),("fade"===L||"sharp"===L)&&(R=1,y=D)}function g(){z.find("img").addClass("originalImage").css("visibility","hidden"),f(),w.each(function(b){P[b]=a(this).attr("src")}),C.css("z-index",0).first().css("z-index",2),C.each(function(b){for(var c=0;R>c;c++)a("<div >",{"class":L+" rotator-slice o-"+(c+1),css:{backgroundImage:"url("+P[b]+")"}}).appendTo(a(this))}),C.each(function(b){Q[b]=a(this).find(".rotator-slice")}),h()}function h(){f(),C.each(function(){var b=a(".rotator-slice",this),c=0;b.css("background-size",D).each(function(b){var d=y,e=D-(b+1)*d;b===R-1&&1!==R&&(e=0,d=c),c=e,a(this).css({backgroundPosition:-e+"px 0",backgroundSize:D,height:x,width:d,left:e}).finish()})})}function i(a,b){C.css("visibility","hidden").css("z-index",0);C.eq(a).css("visibility","visible").css("z-index",2),C.eq(b).css("visibility","visible").css("z-index",1)}function j(a,b){C.eq(a).css("visibility","hidden").css("z-index",0),C.eq(b).css("visibility","visible").css("z-index",2);l(a),e(d)}function k(b,d){if(S)return!1;var f=I,g=F/R;e(c),//calculate next active item
"next"===b?(I++,I===E&&(I=0)):"prev"===b?(I--,0>I&&(I=E-1)):"nodir"===b&&(I=d),//animations functions
i(f,I),S=!0,T=Q[f];var h={dissolve:{opacity:0},fade:{opacity:0},sharp:{width:0},blind:{height:0}};r(),T.each(function(b){a(this).animate(h[L],g*(b+1),function(){b===R-1&&(S=!1,j(f,I))})})}//reset item to default state
function l(a){("dissolve"===L||"fade"===L)&&Q[a].css({opacity:1}),"blind"===L&&Q[a].css({height:x}),"sharp"===L&&Q[a].css({width:y}),O=C.eq(I)}function m(){v=setInterval(function(){V[A]()},G)}/* core functions */
function n(){"undefined"!=typeof M?(J.container=a(M,u),J.prevButton=a(".prev a",J.container),J.nextButton=a(".next a",J.container),J.items=a("."+H.numericClass,J.container)):(H.arrows||H.numeric)&&(J=o())}function o(){var a=H;return a.parent=u,a.itemsNumber=E,a.itemSelector=B,paginator(H)}function p(){H.arrows&&(J.nextButton.on("click",function(){return q(),U[A]("next"),!1}),J.prevButton.on("click",function(){return q(),U[A]("prev"),!1})),H.numeric&&J.items.on("click",function(){q();var b=a(J.items,J.container).index(this);return b===I?!1:(U[A]("nodir",b),!1)})}function q(){clearInterval(v),K&&m()}function r(){H.numeric&&J.container.find(J.items).removeClass("active").eq(I).addClass("active")}var s={panelSelector:".panel.carousel",gallerySelector:".rotator",type:"carousel",speed:600,duration:4e3,effect:"fade",autostart:!0,navigation:{arrows:!0,numeric:!0,numericClass:"item-number"},itemSelector:"li"},t=a.extend(!0,{},s,b),u=a(t.panelSelector);if(!u.length)return!1;var v,w,x,y,z=a(t.gallerySelector,u),A=t.type,B=t.itemSelector,C=a(B,z).addClass("item"),D=C.width(),E=C.length,F=t.speed,G=t.duration,H=t.navigation,I=0,J={},K=t.autostart,L=t.effect,M=t.navigationSelector,N={stack:g},O=C.eq(I),P=[],Q=[],R=15,S=!1,T=[];a(window).on("resize",function(){h()});/*animate functions specific for each type of gallery*/
var U={stack:k},V={stack:function(){U[A]("next")}};//rotator kick-off
N[A](),n(),r(),p(),K&&m()}}(jQuery),$(window).on("load",function(){galleryRotator({panelSelector:".gallery-section-rotator",type:"stack",effect:"dissolve",speed:1e3,autostart:!1}),galleryRotator({panelSelector:".gallery-section-blind",type:"stack",effect:"blind",speed:1700,autostart:!0})}),/*
* author: Bartlomiej Fryzowicz
*/
function(a){function b(){function b(){var b=Modernizr.prefixed("transition"),c={WebkitTransition:["webkitTransitionEnd","-webkit-transition"],MozTransition:["transitionend","-moz-transition"],OTransition:["otransitionend","-o-transition"],msTransition:["MSTransitionEnd","-ms-transition"],transition:["transitionend","transition"]};l=c[b][0],m=c[b][1],q.each(function(){var b=a(this).height();a(this).attr("data-init-height",b).height(b)}).not(j).css({height:0})}function e(){p.removeClass(s).eq(r).addClass(s),j=q.removeClass(s).eq(r).addClass(s)}function f(){Modernizr.csstransitions?(i(d),k.css({opacity:0}),w=!0,k.on(l,function(){i(c),k.css("height",0),j.css("height",j.attr("data-init-height")),j.css({opacity:1}),a(this).off(l),w=!1})):(w=!0,k.stop(!0,!0).fadeOut(d,function(){w=!1,j.stop(!0,!0).fadeIn(c)}))}function g(){Modernizr.csstransitions?(i(d),k.css({height:0}),w=!0,k.on(l,function(){i(c),j.css({height:j.attr("data-init-height")}),a(this).off(l),w=!1})):(w=!0,k.stop(!0,!0).slideUp(d,function(){w=!1,j.stop(!0,!0).slideDown(c)}))}function h(){var b=p.eq(r),c=a(n.contentSelector,o),d=a("a",b).attr("href");"undefined"!=typeof n.ajaxContainer&&(d+=" "+n.ajaxContainer);var e=a('<div class="ajax-loading">');c.html(e).load(d)}function i(a){q.css(m,v+" "+a+"ms")}var j,k,l,m,n=this.options,o=this.element,p=this.getNavigation(),q=a(n.tabContentItemSelector,o).addClass("tab-content-item"),r=n.activeIndex,s=n.activeClass,t=n.type,u=(q.length,{fade:"opacity",slide:"height"}),v=u[t],w=!1;c=n.showTime,d=n.hideTime;var x={slide:a.noop,fade:function(){q.not(j).css({opacity:0})},ajax:a.noop};"ajax"!==t&&e(),Modernizr.csstransitions?(b(),x[t]()):q.not(j).hide(),p.on("click",function(){return a(this).hasClass("active")||w?!1:(k=j,r=p.index(this),e(),y[t](),!1)});var y={fade:f,slide:g,ajax:h}}var c,d;a.widget("my.tabs",{options:{tabContentItemSelector:".tab-content > li",contentSelector:".tab-content",tabNavItemSelector:".tab-nav >li",navSelector:".tab-nav",activeClass:"active",activeIndex:0,showTime:700,hideTime:700,type:"slide"},getNavigation:function(){return this.navItems=a(this.options.tabNavItemSelector,this.element)},setActive:function(a){this.navItems.eq(a).click()},_setOption:function(a,b){this._super(a,b),"showTime"===a&&(c=b),"hideTime"===a&&(d=b)},_create:b})}(jQuery);var tab=$(".tab").tabs();