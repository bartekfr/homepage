/**
author: Bartlomiej Fryzowicz
e-mail: bfryzowicz@gmail.com
**/
!function(){/*canvas rectangle object*/
function a(a,b,c,d,e,f){this.x=b,this.y=c,B++,this.name=B,this.x0=b,this.y0=c,this.width=d,this.height=e,this.color=f,this.boom=a,this.active=a,this.calculateCorners(0,0),this.draw(),this.active||v.push(this)}/*helpers */
function b(a,c){for(var d=0;d<a.cornersX.length;d++){var e=a.cornersX[d]<=g(c.cornersX)&&a.cornersX[d]>=h(c.cornersX),f=a.cornersY[d]<=g(c.cornersY)&&a.cornersY[d]>=h(c.cornersY),i=c.cornersX[d]<=g(a.cornersX)&&c.cornersX[d]>=h(a.cornersX),j=c.cornersY[d]<=g(a.cornersY)&&c.cornersY[d]>=h(a.cornersY);if(i&&j||e&&f){c.calculateCorners(t,u),c.moved=!0;for(var k=0;k<v.length;k++){var l=v[k];l.clicked||l.moved||b(c,l)}return!0}}}function c(a){r=a.pageX-m,s=a.pageY-l,r/=z,s/=z}function d(){t=r-p,u=s-q}function e(a){n.clearRect(0,0,y,A),c(a),f()}function f(){for(var a=0;a<v.length;a++)v[a].moved=!1,v[a].draw()}function g(a){for(var b=0,c=0;c<a.length;c++)a[c]>b&&(b=a[c]);return b}function h(a){for(var b=a[0],c=0;c<a.length;c++)a[c]<b&&(b=a[c]);return b}var i=document.getElementById("myCanvas");if(!i)return!1;var j,k=$("#myCanvas").offset(),l=parseInt(k.top,10),m=parseInt(k.left,10),n=i.getContext("2d"),o=!1,p=0,q=0,r=0,s=0,t=0,u=0,v=[],w=i.width,x=i.height,y=$("#canvas-holder").width(),z=y/w,A=z*x;i.width=y,i.height=A,n.scale(z,z);var B=0;a.prototype.calculateCorners=function(a,b){this.x0=this.x,this.y0=this.y,this.x+=a,this.y+=b,this.cornersX=[this.x-this.width/2,this.x+this.width/2,this.x+this.width/2,this.x-this.width/2],this.cornersY=[this.y-this.height/2,this.y-this.height/2,this.y+this.height/2,this.y+this.height/2]},a.prototype.draw=function(){return n.beginPath(),n.fillStyle=this.color,n.rect(this.cornersX[0],this.cornersY[0],this.width,this.height),this.clicked=n.isPointInPath(r*z,s*z),n.fill(),n.strokeText(this.name,this.cornersX[0]+this.width/2-2,this.cornersY[0]+this.height/2+5),this.clicked&&(j=this,p=r,q=s,o=!0),n.closePath(),this};new a(!1,100,100,70,70,"rgb(0, 255, 0)"),new a(!1,400,300,100,90,"rgb(255, 80, 80)"),new a(!1,220,300,120,200,"rgb(180, 12, 255)"),new a(!1,500,100,70,30,"rgb(45, 100, 156)"),new a(!1,350,200,30,30,"rgb(244, 34, 120)");/*Mouse events*/
i.onmousedown=e,i.onmouseup=function(){o=!1},i.onmouseout=function(){o=!1},i.onmousemove=function(a){if(o===!1)return!1;c(a),d(),j.calculateCorners(t,u),n.clearRect(0,0,y,A);/*objects.forEach(function(obA, i) {
			for(var j = i + 1; j < objects.length; j++) {
				var obB = objects[j];
				var res = checkCollision(obA, obB);
			}
		});*/
for(var e=0;e<v.length;e++){var g=v[e];g!==j&&b(j,g)}p=r,q=s,f()},i.addEventListener("touchmove",function(a){return a.preventDefault(),a=a.targetTouches[0],i.onmousemove(a),!1})}(),function(){function a(a){a=a||window.event,a.dataTransfer.setData("text",this.innerHTML),this.className="dragStart"}function b(){this.className=""}var c=document.getElementById("drop");if(!c)return!1;for(var d=document.getElementById("dragAndDrop"),e=d.getElementsByTagName("a"),f=0;f<e.length;f++)e[f].ondragstart=a,e[f].ondragend=b;c.ondragenter=function(a){//event.dataTransfer.dropEffect = "copy";
return a=a||window.event,a.preventDefault(),!1},c.ondragover=function(a){//event.preventDefault();
return a=a||window.event,!1};var g=!1;c.ondrop=function(a){g||(c.innerHTML=""),g=!0,a=a||window.event;//event.preventDefault();
var b,d=a.dataTransfer.files;if(d)for(var e=0,f=d.length;f>e;e++){var h=d[e],i=new FileReader;-1!==h.type.search("image")?h.size<3145728?(i.onload=function(){b=this.result,document.getElementById("drop").innerHTML+='<img src="'+b+'" />'},i.readAsDataURL(h)):document.getElementById("drop").innerHTML+="File is too big. Try to upload smaller image.<br/>":-1!==h.type.search("text")&&(i.onload=function(){b=this.result,document.getElementById("drop").innerHTML+=b+"<br/>"},i.readAsText(h)),c.innerHTML+="<p>File name: "+h.name+" <br/>File size: "+h.size+" bytes  </p>"}return c.innerHTML+=a.dataTransfer.getData("text"),!1}}();/**
 * @author BF
 */
var paginator;!function(a){var b={arrows:!0,numeric:!0,navClass:"menu",itemClass:"nav-item",prevText:"&laquo;",nextText:"&raquo;",icons:!1,numericClass:"item-number"};paginator=function(c){function d(){l.icons&&e();for(var b=0,c=o;c>b;b++){var d=b+1;l.icons&&(d='<img src="'+k[b]+'" />');var f=a("<li/>",{"class":l.numericClass+" "+l.itemClass}).append('<a href="#">'+d+"</a>");u.append(f)}t=a(s,u)}function e(){k=[],p.find(l.itemSelector).each(function(){var b=a(this).data("thumb");k.push(b)})}function f(){i=a('<a href="#" />').html(r),g=a("<li/>",{"class":l.itemClass+" prev"}).append(i),j=a('<a href="#" />').html(q),h=a("<li/>",{"class":l.itemClass+" next"}).append(j),u.prepend(g),u.append(h)}var g,h,i,j,k,l=a.extend({},b,c),m=l.arrows,n=l.numeric,o=l.itemsNumber,p=l.parent,q=l.nextText,r=l.prevText,s="."+l.numericClass,t=[],u=a("<ul>",{"class":l.navClass+" js-generated"});return n&&d(),m&&f(),p.append(u),{container:u,prevButton:i,nextButton:j,items:t}}}(jQuery);var galleryRotator;!function(a){galleryRotator=function(b,c,d){function e(a){"function"==typeof a&&a()}function f(){C.find(E).each(function(b){a(this).clone().addClass("clone").appendTo(C).css({position:"absolute",right:-(b+1)*I})})}function g(){h(),V.each(function(b){W[b]=a(this).attr("src")}),C.find("img").remove(),F.each(function(b){for(var c=0;Z>c;c++)a("<div>",{css:{backgroundImage:"url("+W[b]+")",backgroundPosition:-(Z-c-1)*Y+"px 0",width:Y,height:H,position:"absolute",left:G-(c+1)*Y}}).appendTo(a(this))}),F.each(function(b){X[b]=a(this).find("div")}),B=F.eq(Q)}function h(){K=1,M=I*K,L=G,C.css({width:G,height:H}),F.css({position:"absolute",left:0,top:0,width:G,height:H}).each(function(b){a(this).css({zIndex:J-b})})}function i(a){if("prev"===a){if(0===Q)return!1;Q--}else if("next"===a){if(Q>=J-K)return!1;Q++}l()}function j(a){if("next"===a){if(Q++,Q===J)return l(function(){C.css({left:0})}),Q=0,void 0}else if("prev"===a){if(Q--,-1===Q)return C.css({left:-J*I}),Q=J-1,l(),void 0}else if(k(A))return!1;l()}function k(a){if(a>J-K&&a-Q>Q+J-a){Q=J+Q;var b=Q%J;return l(function(){C.css({left:-b*I}),Q=b}),!0}}function l(a){v(),e(c);var b=-Q*I;C.stop(!0,!1).animate({left:b},N,function(){e(d),e(a)})}function m(b){if($)return!1;var f=Q,g=N/Z;e(c),"next"===b?(Q++,Q===J&&(Q=0),$=!0,_=X[f],"dissolve"===x.effect||"fade"===x.effect?_.each(function(b){a(this).animate({opacity:0},g*(b+1),function(){b===Z-1&&($=!1,o(),n(f),e(d))})}):"sharp"===x.effect&&_.each(function(b){a(this).animate({width:0},g*(b+1),function(){b===Z-1&&($=!1,o(),n(f),e(d))})})):"prev"===b?(Q--,0>Q&&(Q=J-1),o(Q),n(f)):(o(Q),n(f)),v()}function n(a){X[a].css("opacity",1).width(Y),B=F.eq(Q)}function o(){var b=Q;F.each(function(c){b>c?a(this).css("z-index",b-c-1):c>b?a(this).css("z-index",J-(c-b)):c===b&&a(this).css("z-index",J)})}function p(){z=setInterval(function(){cb[D]()},O)}/* core functions */
function q(){var b=a('<div class="gallery-wrapper">');b.css({width:M,overflow:"hidden"}),C.wrap(b).css({width:L,position:"relative",overflow:"visible"}),y.css({position:"relative"})}function r(){"undefined"!=typeof T?(R.container=a(T,y),R.prevButton=a(".prev a",R.container),R.nextButton=a(".next a",R.container),R.items=a("."+P.numericClass,R.container)):(P.arrows||P.numeric)&&(R=s())}function s(){var a=P;return a.parent=y,a.itemsNumber=J,a.itemSelector=E,paginator(P)}function t(){P.arrows&&(R.nextButton.on("click",function(){return u(),bb[D]("next"),!1}),R.prevButton.on("click",function(){return u(),bb[D]("prev"),!1})),P.numeric&&R.items.on("click",function(){return u(),A=Q,Q=a(R.items,R.container).index(this),bb[D](),!1})}function u(){clearInterval(z),S&&p()}function v(){if(P.numeric){var a=Q%J;0>a&&(a=J+a),R.container.find(R.items).removeClass("active").eq(a).addClass("active")}}var w={panelSelector:".panel.carousel",gallerySelector:"ul",type:"carousel",speed:600,duration:3e3,visibleItems:1,effect:"fade",autostart:!0,navigation:{arrows:!0,numeric:!0,numericClass:"item-number"},itemSelector:"li"},x=a.extend(!0,{},w,b),y=a(x.panelSelector);if(!y.length)return!1;var z,A,B,C=a(x.gallerySelector,y),D=x.type,E=x.itemSelector,F=a(E,C),G=F.width(),H=F.height(),I=F.outerWidth(!0),J=F.length,K=x.visibleItems,L=J*I,M=I*K,N=x.speed,O=x.duration,P=x.navigation,Q=0,R={},S=x.autostart,T=x.navigationSelector,U={pendulum:a.noop,carousel:f,stack:g},V=C.find("img"),W=[],X=[],Y=20,Z=G/Y,$=!1,_=[];("fade"===x.effect||"sharp"===x.effect)&&(Z=1,Y=G);/*animate functions specific for each type of gallery*/
var ab,bb={pendulum:i,carousel:j,stack:m},cb={carousel:function(){bb[D]("next")},pendulum:function(){Q>=J-K?ab="prev":0===Q&&(ab="next"),bb[D](ab)},stack:function(){bb[D]("next")}};U[D](),q(),r(),v(),t(),S&&p()}}(jQuery),galleryRotator({panelSelector:".gallery-section-rotator",type:"stack",effect:"dissolve",speed:1700}),/*
* author: Bartlomiej Fryzowicz
*/
function(a){function b(){function b(){var b=Modernizr.prefixed("transition"),c={WebkitTransition:["webkitTransitionEnd","-webkit-transition"],MozTransition:["transitionend","-moz-transition"],OTransition:["otransitionend","-o-transition"],msTransition:["MSTransitionEnd","-ms-transition"],transition:["transitionend","transition"]};l=c[b][0],m=c[b][1],q.each(function(){var b=a(this).height();a(this).attr("data-init-height",b).height(b)}).not(j).css({height:0})}function e(){p.removeClass(s).eq(r).addClass(s),j=q.removeClass(s).eq(r).addClass(s)}function f(){Modernizr.csstransitions?(i(d),k.css({opacity:0}),w=!0,k.on(l,function(){i(c),k.css("height",0),j.css("height",j.attr("data-init-height")),j.css({opacity:1}),a(this).off(l),w=!1})):(w=!0,k.stop(!0,!0).fadeOut(d,function(){w=!1,j.stop(!0,!0).fadeIn(c)}))}function g(){Modernizr.csstransitions?(i(d),k.css({height:0}),w=!0,k.on(l,function(){i(c),j.css({height:j.attr("data-init-height")}),a(this).off(l),w=!1})):(w=!0,k.stop(!0,!0).slideUp(d,function(){w=!1,j.stop(!0,!0).slideDown(c)}))}function h(){var b=p.eq(r),c=a(n.contentSelector,o),d=a("a",b).attr("href");"undefined"!=typeof n.ajaxContainer&&(d+=" "+n.ajaxContainer);var e=a('<div class="ajax-loading">');c.html(e).load(d)}function i(a){q.css(m,v+" "+a+"ms")}var j,k,l,m,n=this.options,o=this.element,p=this.getNavigation(),q=a(n.tabContentItemSelector,o).addClass("tab-content-item"),r=n.activeIndex,s=n.activeClass,t=n.type,u=(q.length,{fade:"opacity",slide:"height"}),v=u[t],w=!1;c=n.showTime,d=n.hideTime;var x={slide:a.noop,fade:function(){q.not(j).css({opacity:0})},ajax:a.noop};"ajax"!==t&&e(),Modernizr.csstransitions?(b(),x[t]()):q.not(j).hide(),p.on("click",function(){return a(this).hasClass("active")||w?!1:(k=j,r=p.index(this),e(),y[t](),!1)});var y={fade:f,slide:g,ajax:h}}var c,d;a.widget("my.tabs",{options:{tabContentItemSelector:".tab-content > li",contentSelector:".tab-content",tabNavItemSelector:".tab-nav >li",navSelector:".tab-nav",activeClass:"active",activeIndex:0,showTime:700,hideTime:700,type:"slide"},getNavigation:function(){return this.navItems=a(this.options.tabNavItemSelector,this.element)},setActive:function(a){this.navItems.eq(a).click()},_setOption:function(a,b){this._super(a,b),"showTime"===a&&(c=b),"hideTime"===a&&(d=b)},_create:b})}(jQuery),$(".tab").tabs();